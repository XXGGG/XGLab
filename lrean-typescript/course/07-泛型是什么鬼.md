# 07-泛型是什么鬼 👻

## 👋 嗨！
听到“泛型 (Generics)”这个词，很多人就想跑。
别怕！把它想象成**“类型的参数”**或者**“万能模具”**就很好理解了。

---

## 😫 1. 为什么需要泛型？

假设我们要写一个函数，它接收什么，就返回什么（这就叫 identity 函数）。

```typescript
// 只能处理数字
function returnNumber(arg: number): number {
  return arg;
}

// 只能处理字符串
function returnString(arg: string): string {
  return arg;
}
```
这也太麻烦了！如果我要处理 100 种类型，岂不是要写 100 个函数？

你可能会想用 `any`：
```typescript
function returnAny(arg: any): any {
  return arg;
}
```
**问题来了**：虽然不报错，但当你传入字符串时，返回值的类型也变成了 `any`，TS 记不住它原来是个字符串，你就失去了代码提示。

---

## 🦄 2. 泛型登场：<T>

我们可以给函数“挖个坑”，这个坑专门用来填类型。我们通常用字母 `T` (Type) 来表示。

```typescript
// <T> 就像是类型的占位符
function identify<T>(arg: T): T {
  return arg;
}
```
这段代码的意思是：
1. 给我一个类型 `T`。
2. 参数 `arg` 必须是 `T` 类型。
3. 返回值也必须是 `T` 类型。

**怎么用？**

```typescript
// 显式指定：T 是 string
const s = identify<string>("Hello"); 
// s 的类型就是 string

// 显式指定：T 是 number
const n = identify<number>(100); 
// n 的类型就是 number

// 自动推断 (最常用)：TS 会看你传了什么，自动把 T 填上
const b = identify(true); 
// TS 自动推断 T 是 boolean
```

看！一个函数，处理了所有类型，而且类型信息一点都没丢！这就是泛型的魔力。✨

---

## 📦 3. 泛型接口

泛型不仅可以用在函数上，还可以用在接口上。
这就好比你买了个收纳盒，盒子上贴了个标签纸，你想写什么就写什么。

```typescript
// 一个通用的盒子，里面放什么由 T 决定
interface Box<T> {
  contents: T;
}

// 这是一个装字符串的盒子
const stringBox: Box<string> = { contents: "Letters" };

// 这是一个装数字的盒子
const numberBox: Box<number> = { contents: 100 };
```

---

## 🖼️ Vue 和 React 场景

其实你早就见过泛型了！

### Vue (ref)
```typescript
// 这里的 <string> 就是在告诉 ref 这个泛型函数：
// "你要处理的是 string 类型"
const name = ref<string>("Trae");
```

### React (useState)
```tsx
// 告诉 useState，我要存的是 User 类型
const [user, setUser] = useState<User | null>(null);
```

### 所有的 HTTP 请求库 (axios/fetch)
当你请求后端数据时，你不知道后端会返回什么。所以库作者留了个泛型给你填。

```typescript
interface User {
  id: number;
  name: string;
}

// 告诉 get 函数：结果将会是 User 类型
axios.get<User>('/api/user').then(res => {
  // 这里 res.data 就会自动有 id 和 name 的提示！
  console.log(res.data.name);
});
```

---

## 📝 课后作业

新建 `homework-07.ts`：

1. 定义一个泛型函数 `createArray<T>`，接收两个参数：`length` (长度) 和 `value` (默认值，类型为 T)。
2. 它的作用是返回一个数组，长度是 `length`，里面填满了 `value`。
   *(提示：可以用 `new Array(length).fill(value)` 来实现逻辑)*
3. 尝试调用：
   - `createArray<string>(3, 'x')` -> 应该得到 `['x', 'x', 'x']`
   - `createArray<number>(3, 100)` -> 应该得到 `[100, 100, 100]`

**运行：** `npx tsx homework-07.ts`

---
**下节课预告：** 终于到实战了！TS 在 Vue 中到底怎么用？我们将结合 Vue3 + Vite 来一次大练兵！⚔️
